<!DOCTYPE html>
<html lang="pt-br">
<head>
    <title>Hub de Controle ESP32 - Socket.IO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Biblioteca Socket.IO do cliente -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.4/socket.io.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../static/css/style.css" rel="stylesheet">
</head>
<body class="p-4 md:p-8 min-h-screen">
    <div class="max-w-xl mx-auto rounded-xl main-card p-6 md:p-8">
        <h1 class="text-3xl font-extrabold text-gray-900 mb-2">Hub de Controle IoT (Flask)</h1>
        <p class="text-gray-600 mb-6">Controle seu ESP32 via Socket.IO</p>

        <section class="ESP-container">
             <!-- Status do Dispositivo -->
            <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 mb-6 rounded-lg transition duration-300" id="status-card">
                <span class="text-lg font-semibold text-gray-700 mb-2 sm:mb-0">ESP-Sala Status:</span>
                <span id="esp-status" class="px-4 py-1 font-bold rounded-full text-white shadow-md"></span>
            </div>

            <!-- Botões de Controle -->
                <div class="flex flex-col gap-4">
                
                <!-- Lâmpada (Relé 1) -->
                <div class="bg-blue-50 rounded-lg p-4 shadow-md hover:shadow-lg transition flex justify-between items-center">
                    <div class="flex items-center">
                        <svg id="icon-lamp" class="w-8 h-8 mr-3 text-gray-400 transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 11l3-3m0 0l3 3m-3-3v8m0-13A9 9 0 015 12a9 9 0 0118 0 9 9 0 01-9 9"></path>
                        </svg>
                        <div>
                            <h3 class="font-semibold text-xl text-blue-800">Lâmpada</h3>
                            <p id="label-lamp" class="text-sm text-gray-500">Relé 1: Desligado</p>
                        </div>
                    </div>
                    <button id="btn-lamp" class="toggle-button bg-red-600 text-white" onclick="toggleDevice('lamp')">
                        Ligar
                    </button>
                </div>

                <!-- Cooler (Relé 2) -->
                <div class="bg-yellow-50 rounded-lg p-4 shadow-md hover:shadow-lg transition flex justify-between items-center">
                    <div class="flex items-center">
                        <svg id="icon-cooler" class="w-8 h-8 mr-3 text-gray-400 transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l2.5-2.5 2.5 2.5v13m-5-13h5m-5 0l-2.5 2.5V19"></path>
                        </svg>
                        <div>
                            <h3 class="font-semibold text-xl text-yellow-800">Cooler</h3>
                            <p id="label-cooler" class="text-sm text-gray-500">Relé 2: Desligado</p>
                        </div>
                    </div>
                    <button id="btn-cooler" class="toggle-button bg-red-600 text-white" onclick="toggleDevice('cooler')">
                        Ligar
                    </button>
                </div>
            </div>
        </section>
       

        <!-- Log -->
        <div class="mt-8">
            <h2 class="text-xl font-bold text-gray-800 mb-2 border-b pb-2">Log do Hub (Cliente Web)</h2>
            <div id="log-container" class="p-3 h-40 overflow-y-auto rounded-lg resize-y border border-gray-300">
                <p>Aguardando conexão...</p>
            </div>
        </div>
    </div>

    <!-- JavaScript externo -->
    <script>
        const initialStatus = "{{ initial_status }}";
    </script>
    <script src="../static/js/main.js"></script>
</body>
</html>
